
<html lang="ru"><head><base href="https://example.com/"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Топ поклонников Дупла</title><meta name="description" content="Топ поклонников Дупла - рейтинг пользователей по сумме Darai"><script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script><style>@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Dancing+Script&display=swap');:root { --primary-color: #1e88e5; --secondary-color: #64b5f6; --background-color: #f0f4f8; --text-color: #333333; --highlight-color: #bbdefb; --button-hover-color: #1565c0; --progress-bg: #e0e0e0; --progress-fill: #76c7c0; }body { font-family: 'Montserrat', sans-serif; margin: 0; padding: 0; background-color: var(--background-color); color: var(--text-color); display: flex; justify-content: center; align-items: center; min-height: 100vh; }.container { width: 100%; max-width: none; padding: 30px 10px; box-sizing: border-box; background-color: #ffffff; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); position: relative; overflow: hidden; } .container::before { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, var(--highlight-color) 0%, rgba(255,255,255,0) 70%); opacity: 0.5; z-index: -1; animation: pulse 20s infinite; } @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }h1, h2 { font-family: 'Dancing Script', cursive; text-align: center; margin-bottom: 20px; color: var(--primary-color); text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }h1 { font-size: clamp(2rem, 5vw, 2.5rem); }h2 { font-size: clamp(1.5rem, 3vw, 2rem); color: var(--secondary-color); }#sumData { text-align: center; font-size: clamp(1.2rem, 2.5vw, 1.5rem); margin-bottom: 20px; color: #2e7d32; font-weight: bold; } .progress-container { width: 100%; background-color: var(--progress-bg); border-radius: 25px; overflow: hidden; margin: 20px 0; height: 25px; } .progress-bar { height: 100%; width: 0; background-color: var(--progress-fill); transition: width 0.5s ease; } .progress-info { display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9rem; color: var(--text-color); }button { display: block; margin: 0 auto 30px auto; padding: 12px 24px; font-size: 1rem; font-weight: 700; color: #ffffff; background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); border: none; border-radius: 25px; cursor: pointer; transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }button:hover, button:focus { background: linear-gradient(45deg, var(--secondary-color), var(--primary-color)); transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.2); } .leaderboard { width: 100%; margin-top: 20px; overflow-x: auto; } .leaderboard-header { display: flex; justify-content: space-between; padding: 15px 10px; background-color: var(--primary-color); color: #ffffff; font-weight: 700; text-transform: uppercase; border-radius: 10px 10px 0 0; font-size: 0.9rem; } .leaderboard-body { display: flex; flex-direction: column; } .leaderboard-row { display: flex; flex-direction: row; justify-content: space-between; padding: 12px 10px; background-color: #ffffff; border-bottom: 1px solid #e0e0e0; font-size: 0.8rem; align-items: center; } .leaderboard-row:nth-child(even) { background-color: #f9f9f9; } .leaderboard-row:hover { background-color: #f1f1f1; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); } .leaderboard-row span { width: 22%; text-align: center; padding: 5px 0; } .prize-winner span:first-child { color: #ff9800; } .leaderboard-row svg { vertical-align: middle; margin-right: 4px; } /* Новые стили для изменения ширины колонок */ .leaderboard-header span:nth-child(1), .leaderboard-row span:nth-child(1) { width: 10%; } .leaderboard-header span:nth-child(2), .leaderboard-row span:nth-child(2) { width: 50%; } .leaderboard-header span:nth-child(3), .leaderboard-row span:nth-child(3) { width: 25%; } .leaderboard-header span:nth-child(4), .leaderboard-row span:nth-child(4) { width: 15%; } /* Предотвращение наложения текста */ .leaderboard-header span, .leaderboard-row span { text-align: center; padding: 5px 0; font-size: 0.8rem; word-wrap: break-word; } /* Мобильная оптимизация */ @media (max-width: 600px) { .container { padding: 20px 5px; } h1 { font-size: clamp(1.5rem, 4vw, 2rem); } h2 { font-size: clamp(1.2rem, 2.5vw, 1.8rem); } #sumData { font-size: clamp(1rem, 2vw, 1.3rem); } .leaderboard-header, .leaderboard-row { flex-direction: row; align-items: center; justify-content: space-between; } .leaderboard-header span, .leaderboard-row span { width: 10%, 50%, 25%, 15%; text-align: center; padding: 5px 0; font-size: 0.7rem; } .leaderboard-header { font-size: 0.9rem; } .leaderboard-row { font-size: 0.7rem; } .progress-container { height: 20px; } button { padding: 10px 20px; font-size: 0.9rem; } th:nth-child(4), td:nth-child(4) { font-size: 0.8rem; }}</style></head><body><div class="container"><h1>в дупле</h1><div id="sumData">Загрузка суммы...</div><div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div><div class="progress-info"><span id="current-level">Уровень: -</span><span id="next-level-info">Чтобы перейти на следующий уровень: - DarAi</span></div><h2>Топ поклонников Дупла</h2><button id="load-data-btn">Обновить и загрузить данные</button><div class="leaderboard"><div class="leaderboard-header"><span>№</span><span>Кошелек</span><span>Сумма в Darai</span><span>Boost</span></div><div id="data-table" class="leaderboard-body"></div></div></div><script>const levels = [{ level: 1, threshold: 1_000_000 },{ level: 2, threshold: 10_000_000 },{ level: 3, threshold: 50_000_000 },{ level: 4, threshold: 100_000_000 },{ level: 5, threshold: 200_000_000 },{ level: 6, threshold: 400_000_000 },{ level: 7, threshold: 800_000_000 },{ level: 8, threshold: 1_500_000_000 },{ level: 9, threshold: 3_000_000_000 }]; const API_KEY_SUM = '82DCA141CBC949B89A07F651AE64E917'; const RAW_DATA_URL_SUM = 'https://api.nearblocks.io/v1/fts/darai.tkn.near/holders?page=1&per_page=25'; const WHITELIST_KEYWORD = 'darai_duplo.near'; const API_KEY_TOP = '30ee49e1-f45e-4de0-ba7e-e01d6cecd484'; const RAW_DATA_URL_TOP = 'https://api.pikespeak.ai/account/incoming-token/darai_duplo.near'; const BLACKLIST = ['kaylani_vibe.tg','miplix.tg','flatrat3656.near','alla_moons.tg','darai_drop.near']; const EXCLUDED_OWNERS = ['ixpycti.tg','maximus159rus.tg','myasnichok.near','n_stasyaaa.tg','vadart1985.tg','zefirinochka.tg','zlvert.tg','ramankuntsevich.tg','romann0711.tg']; const WHITELIST = { 'alexn_450.tg': 20 }; const queries = [{ query: `query { mb_views_nft_tokens(where: {nft_contract_id: {_eq: "yuplandshop.mintbase1.near"}, owner: {_gt: "darai_collection.near"}, title: {_iregex: "Super Dupla generator"}}) { owner }}`, percentageMultiplier: 50 },{ query: `query { mb_views_nft_tokens(where: {nft_contract_id: {_eq: "yuplandshop.mintbase1.near"}, owner: {_gt: "darai_collection.near"}, title: {_iregex: "Hollow Upgrade Scroll"}}) { owner }}`, percentageMultiplier: 20 },{ query: `query { mb_views_nft_tokens(where: {nft_contract_id: {_eq: "yuplandshop.mintbase1.near"}, owner: {_gt: "darai_collection.near"}, title: {_iregex: "DarAi Generator"}}) { owner }}`, percentageMultiplier: 10 }]; const globalOwnerCounts = {}; async function fetchSumData() { try { const response = await fetch(RAW_DATA_URL_SUM, { method: 'GET', headers: { 'Authorization': 'Bearer ' + API_KEY_SUM }}); if (!response.ok) { throw new Error('Ошибка сети: ' + response.status); } const data = await response.json(); displaySumData(data); } catch (error) { document.getElementById('sumData').innerText = `Ошибка: ${error.message}`; } } function displaySumData(data) { const sumElement = document.getElementById('sumData'); if (data && data.holders && data.holders.length > 0) { const filtered = data.holders.filter(holder => holder.account === WHITELIST_KEYWORD); if (filtered.length > 0) { const total = filtered.reduce((acc, holder) => acc + Number(holder.amount), 0); const formattedTotal = (total / 1e18).toLocaleString('ru-RU', {minimumFractionDigits: 0, maximumFractionDigits: 6}); sumElement.innerText = `Общая сумма Darai: ${formattedTotal}`; updateLevel(total / 1e18); } else { sumElement.innerText = 'Совпадений не найдено.'; resetLevel(); } } else { sumElement.innerText = 'Данные не найдены.'; resetLevel(); } } function updateLevel(total) { let currentLevel = 0; let nextLevelThreshold = 0; for (let i = 0; i < levels.length; i++) { if (total >= levels[i].threshold) { currentLevel = levels[i].level; } else { nextLevelThreshold = levels[i].threshold; break; } } if (currentLevel === 0) { currentLevel = 1; nextLevelThreshold = levels[0].threshold; } const currentLevelElement = document.getElementById('current-level'); const nextLevelInfoElement = document.getElementById('next-level-info'); const progressBar = document.getElementById('progress-bar'); let previousThreshold = currentLevel === 1 ? 0 : levels[currentLevel - 2].threshold; let currentThreshold = levels[currentLevel - 1].threshold; let progressPercentage = 0; if (currentLevel < levels.length) { progressPercentage = ((total - previousThreshold) / (levels[currentLevel].threshold - previousThreshold)) * 100; nextLevelInfoElement.innerText = `Чтобы перейти на уровень ${currentLevel + 1}: ${nextLevelThreshold.toLocaleString('ru-RU')} DarAi`; } else { progressPercentage = 100; nextLevelInfoElement.innerText = `Вы достигли максимального уровня.`; } currentLevelElement.innerText = `Уровень: ${currentLevel}`; progressBar.style.width = `${Math.min(progressPercentage, 100)}%`; document.querySelector('h1').innerText = `${currentLevel} уровень дупла`; } function resetLevel() { const currentLevelElement = document.getElementById('current-level'); const nextLevelInfoElement = document.getElementById('next-level-info'); const progressBar = document.getElementById('progress-bar'); currentLevelElement.innerText = `Уровень: -`; nextLevelInfoElement.innerText = `Чтобы перейти на следующий уровень: - DarAi`; progressBar.style.width = `0%`; document.querySelector('h1').innerText = `в дупле`; } async function fetchData(query, percentageMultiplier) { try { const response = await axios.post('https://graph.mintbase.xyz/mainnet', { query }, { headers: { 'Content-Type': 'application/json', 'mb-api-key': 'anon' }}); const data = response.data.data.mb_views_nft_tokens; data.forEach(item => { if (globalOwnerCounts[item.owner]) { globalOwnerCounts[item.owner] += percentageMultiplier; } else { globalOwnerCounts[item.owner] = percentageMultiplier; } }); } catch (error) { console.error('Error fetching data:', error); } } document.addEventListener('DOMContentLoaded', function () { const loadButton = document.getElementById('load-data-btn'); async function fetchDataAndFilter() { try { const response = await fetch(RAW_DATA_URL_TOP, { method: 'GET', headers: { 'accept': 'application/json', 'x-api-key': API_KEY_TOP }}); if (!response.ok) { throw new Error(`Ошибка запроса: ${response.status}`); } const data = await response.json(); const filteredData = data .filter(item => item.contract === 'darai.tkn.near') .filter(item => !BLACKLIST.includes(item.sender)); displayData(filteredData); } catch (error) { console.error('Ошибка при запросе данных:', error); const dataTable = document.getElementById('data-table'); dataTable.innerHTML = '<div class="leaderboard-row"><span colspan="4">Ошибка загрузки данных</span></div>'; } } function displayData(filteredData) { filteredData.sort((a, b) => { const boostA = globalOwnerCounts[a.sender] || 0; const boostB = globalOwnerCounts[b.sender] || 0; const amountA = parseFloat(a.amount) * (1 + boostA / 100); const amountB = parseFloat(b.amount) * (1 + boostB / 100); return amountB - amountA; }); const dataTable = document.getElementById('data-table'); const fragment = document.createDocumentFragment(); filteredData.slice(0, 25).forEach((item, index) => { const boost = globalOwnerCounts[item.sender] || 0; const originalAmount = parseFloat(item.amount).toFixed(2).replace(/\\.\\?0+$/, ''); const boostedAmount = (originalAmount * (1 + boost / 100)).toFixed(2).replace(/\\.\\?0+$/, ''); let rowClass = ''; let rankContent = `${index + 1}`; if (index < 3) { const medals = [`<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" fill="#FFD700"><circle cx="10" cy="10" r="10"/></svg>`, `<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" fill="#C0C0C0"><circle cx="10" cy="10" r="10"/></svg>`, `<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" fill="#CD7F32"><circle cx="10" cy="10" r="10"/></svg>`]; rankContent = `${medals[index]} ${index + 1}`; } else if (index < 10) { rowClass = 'prize-winner'; } const row = document.createElement('div'); row.classList.add('leaderboard-row'); if (rowClass) { row.classList.add(rowClass); } row.innerHTML = `<span>${rankContent}</span><span>${item.sender}</span><span>${boostedAmount}</span><span>${boost}%</span>`; fragment.appendChild(row); }); dataTable.innerHTML = ''; dataTable.appendChild(fragment); } loadButton.addEventListener('click', fetchDataAndFilter); async function fetchAllDataInDOM() { const promises = queries.map(q => fetchData(q.query, q.percentageMultiplier)); await Promise.all(promises); for (const [address, boost] of Object.entries(WHITELIST)) { if (globalOwnerCounts[address]) { globalOwnerCounts[address] += boost; } else { globalOwnerCounts[address] = boost; } } await fetchDataAndFilter(); } fetchAllDataInDOM(); fetchSumData(); });</script></body></html>
